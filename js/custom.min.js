var budgetController=function(){var e=function(e,t,n){this.id=e,this.desc=t,this.value=n,this.percent=-1};e.prototype.calculatePercent=function(e){e>0||!isNaN(e)?this.percent=Math.round(parseFloat(this.value)/e*100):this.percent="--"};var t=function(e,t,n){this.id=e,this.desc=t,this.value=n},n=function(e){var t=l.allItems[e],n=0;t.forEach(function(e){n+=e.value}),l.total[e]=n},l={allItems:{exp:[],inc:[]},total:{inc:0,exp:0},percent:{inc:0,exp:0}};return{addItem:function(n,i,o){var r,c;return c=l.allItems[n].length>0?l.allItems[n][l.allItems[n].length-1].id+1:0,"exp"===n?(r=new e(c,i,o)).calculatePercent(l.total.inc):"inc"===n&&(r=new t(c,i,o)),l.allItems[n].push(r),r},deleteItem:function(e,t){l.allItems[e]=l.allItems[e].filter(function(e){return e.id!==parseInt(t)})},calculateBudget:function(){n("inc"),n("exp"),l.percent.exp=Math.round(l.total.exp/l.total.inc*100),l.percent.inc=100-l.percent.exp,(l.percent.exp===1/0||isNaN(l.percent.exp)||isNaN(l.percent.inc))&&(l.percent.exp="--",l.percent.inc="--")},getBudget:function(){return{budget:l.total.inc-l.total.exp,totalIncome:l.total.inc,totalExpense:l.total.exp,incomePercent:l.percent.inc,expensePercent:l.percent.exp}}}}(),uiController=function(){var e={inputType:"select-value",inputDesc:"input-desc",inputValue:"input-value",addButton:"add-button",incomeList:"income-list",expenseList:"expense-list",moneyStatus:"money-status",totalIncome:"total-income",totalExpense:"total-expense",moneyLeft:"money-value",expensePercent:"expense-percent",incomePercent:"income-percent"},t=new Intl.NumberFormat("en-us",{style:"currency",currency:"INR"});return{getInput:function(){return{type:document.getElementById(e.inputType).value,desc:document.getElementById(e.inputDesc).value,value:document.getElementById(e.inputValue).value}},getDomStrings:e,addListitem:function(n,l){var i,o;"exp"===l?(i="<li id=\"exp-%id%\"><span class=\"budget-list__desc\">%desc%</span><span class=\"budget-list__value expense\">-%value%<span class=\"percent inverse\">%percent% %</span><svg class=\"delete-button\" xmlns='http://www.w3.org/2000/svg' width='2rem' height='2rem' viewBox='0 0 512 512'><title>ionicons-v5-m</title><path d='M448,256c0-106-86-192-192-192S64,150,64,256s86,192,192,192S448,362,448,256Z' style='fill:none;stroke:#FF5049;stroke-miterlimit:10;stroke-width:32px'/><line x1='320' y1='320' x2='192' y2='192' style='fill:none;stroke:#FF5049;stroke-linecap:round;stroke-linejoin:round;stroke-width:32px'/><line x1='192' y1='320' x2='320' y2='192' style='fill:none;stroke:#FF5049;stroke-linecap:round;stroke-linejoin:round;stroke-width:32px'/></svg></span></li>",o=document.getElementById(e.expenseList),i=i.replace("%percent%",n.percent)):(i="<li id=\"inc-%id%\"><span class=\"budget-list__desc\">%desc%</span><span class=\"budget-list__value income\">+%value%<svg class=\"delete-button\" xmlns='http://www.w3.org/2000/svg' width='2rem' height='2rem' viewBox='0 0 512 512'><title>ionicons-v5-m</title><path d='M448,256c0-106-86-192-192-192S64,150,64,256s86,192,192,192S448,362,448,256Z' style='fill:none;stroke:#28B9B5;stroke-miterlimit:10;stroke-width:32px'/><line x1='320' y1='320' x2='192' y2='192' style='fill:none;stroke:#28B9B5;stroke-linecap:round;stroke-linejoin:round;stroke-width:32px'/><line x1='192' y1='320' x2='320' y2='192' style='fill:none;stroke:#28B9B5;stroke-linecap:round;stroke-linejoin:round;stroke-width:32px'/></svg></span></li>",o=document.getElementById(e.incomeList)),i=(i=(i=i.replace("%id%",n.id)).replace("%desc%",n.desc)).replace("%value%",t.format(n.value)),o.insertAdjacentHTML("beforeend",i)},clearInputFields:function(){document.getElementById(e.inputDesc).value="",document.getElementById(e.inputValue).value=""},updateBudget:function(n){var l=document.getElementById(e.moneyStatus),i=document.getElementById(e.moneyLeft),o=document.getElementById(e.totalIncome),r=document.getElementById(e.totalExpense),c=document.getElementById(e.incomePercent),s=document.getElementById(e.expensePercent);n.totalExpense>n.totalIncome?(l.innerHTML="-",i.innerHTML=t.format(n.totalExpense-n.totalIncome)):(l.innerHTML="+",i.innerHTML=t.format(n.totalIncome-n.totalExpense)),o.innerHTML="+"+t.format(n.totalIncome),r.innerHTML="-"+t.format(n.totalExpense),s.innerHTML=n.expensePercent+"%",c.innerHTML=n.incomePercent+"%"},deleteItem:function(e){e.parentNode.removeChild(e)}}}(),appController=function(e,t){var n=function(){t.calculateBudget();var n=t.getBudget();e.updateBudget(n)},l=function(){var l=e.getInput();if(""!==l.desc&&!isNaN(l.value)&&l.value>0){var i=t.addItem(l.type,l.desc,parseFloat(l.value));e.addListitem(i,l.type),e.clearInputFields(),n()}},i=function(l){var i,o,r=l.target.parentNode.parentNode,c=l.target.parentNode.parentNode.id;(c.search("inc-")>=0||c.search("exp-")>=0)&&(i=c.split("-")[0],o=c.split("-")[1]),parseInt(o)>=0&&(t.deleteItem(i,o),e.deleteItem(r),n())};return{init:function(){var t;t=e.getDomStrings,document.getElementById(t.addButton).addEventListener("click",l),document.addEventListener("keypress",function(e){"Enter"===e.key&&l()}),document.getElementById("report-list").addEventListener("click",i)}}}(uiController,budgetController);appController.init();